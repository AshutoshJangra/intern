{"version":3,"sources":["services/auth-service.js","contexts/AuthContext.js","components/auth/login/actions.js","components/auth/login/login.js","components/auth/login/register.js","components/shared/Header.js","services/axios-service.js","firebase/config.js","hooks/useStorage.js","components/Progress.js","components/dashboard/Dashboard.js","components/shared/auth/ProtectedRoute.js","components/shared/auth/LoggedInRoute.js","components/root.js","App.js","reportWebVitals.js","index.js"],"names":["tokenKey","localStorage","getItem","this","token","jwt","JSON","parse","console","log","setItem","stringify","removeItem","exp","decode","moment","isBefore","getExpiration","getToken","isValid","AuthContext","createContext","AuthContextProvider","props","useState","isAuth","setState","error","setError","authAPI","checkAuthState","e","authService","isAuthenticated","signOut","invalidateUser","signIn","loginData","userData","axios","post","then","res","data","catch","saveToken","err","Provider","value","children","Login","useContext","email","setEmail","password","setPassword","to","pathname","className","onSubmit","preventDefault","type","placeholder","onChange","target","required","Register","name","setName","passconf","setPassconf","flag","setFlag","passwordConfirm","Promise","reject","response","errors","registered","Header","Fragment","onClick","axiosInstance","initInstance","create","baseURL","timeout","interceptors","request","use","config","headers","Authorization","firebaseApp","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectStorage","getStorage","axiosService","getInstance","useStorage","file","btn","progress","setProgress","url","setUrl","a","link","put","useEffect","storageRef","ref","uploadTask","uploadBytesResumable","on","snap","percentage","bytesTransferred","totalBytes","getDownloadURL","snapshot","downloadURL","postData","updateData","Progress","setFile","style","width","Dashboard","user","setUser","msg","setMsg","get","htmlFor","id","files","map","key","src","el","document","createElement","body","appendChild","select","execCommand","removeChild","copyClipboard","_id","delete","deleteFile","ProtectedRoute","rest","onlyChild","React","Children","only","render","cloneElement","LoggedInRoute","Component","component","Root","auth","exact","path","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"mfA0Ce,M,iDAtCbA,SAAW,a,4CAEX,WACE,OAAOC,aAAaC,QAAQC,KAAKH,Y,oBAKnC,SAAOI,GACL,OAAOC,SAAWC,KAAKC,MAAMH,M,uBAG/B,SAAUA,GACRI,QAAQC,IAAIL,GACZH,aAAaS,QAAQP,KAAKH,SAAUM,KAAKK,UAAUP,EAAMA,U,4BAG3D,WACEH,aAAaW,WAAWT,KAAKH,Y,2BAG/B,SAAcI,GACZ,IAAMS,EAAMV,KAAKW,OAAOV,GAAOS,IAE/B,OAAOE,OAAYF,K,qBAGrB,SAAQT,GACN,OAAOW,IAASC,SAASb,KAAKc,cAAcb,M,6BAG9C,WACE,IAAMA,EAAQD,KAAKe,WAEnB,SAAOd,IAASD,KAAKgB,QAAQf,Q,sCClCpBgB,EAAcC,0BAkDZC,EAhDa,SAACC,GAC5B,MAA2BC,oBAAS,GAApC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAA0BF,mBAAS,IAAnC,mBAAOG,EAAP,KAAcC,EAAd,KA8BMC,EAAU,CACfC,eA7BsB,SAACC,GACnBC,EAAYC,mBACfP,GAAS,IA4BVQ,QApBe,WACfF,EAAYG,iBACZT,GAAS,GACTE,EAAS,KAkBTQ,OAfc,SAACC,GACf,OCEoBC,EDDZD,ECQDE,IACJC,KAAK,sBADD,eAC6BF,IACjCG,MAAK,SAACC,GAAD,OAASA,EAAIC,QAClBC,OAAM,SAACjB,GAAD,OAAWnB,QAAQC,IAAIkB,ODV9Bc,MAAK,SAACrC,GAIN,OAHA4B,EAAYa,UAAUzC,GACtBsB,GAAS,GAEFtB,KAEPwC,OAAM,SAACE,GAAD,OAASlB,EAAS,uCCNP,IAACU,GDapBb,SACAE,QACAM,gBA5BuB,WACvB,OAAOD,EAAYC,oBA8BpB,OACC,cAACb,EAAY2B,SAAb,CAAsBC,MAAOnB,EAA7B,SACEN,EAAM0B,Y,gBEQKC,EApDD,WACb,MAAkCC,qBAAW/B,GAArCK,EAAR,EAAQA,OAAQE,EAAhB,EAAgBA,MAAOS,EAAvB,EAAuBA,OAEvB,EAA0BZ,mBAAS,IAAnC,mBAAO4B,EAAP,KAAcC,EAAd,KACA,EAAgC7B,mBAAS,IAAzC,mBAAO8B,EAAP,KAAiBC,EAAjB,KAOA,OAAI9B,EACI,cAAC,IAAD,CAAU+B,GAAI,CAAEC,SAAU,gBAIjC,yBAASC,UAAU,gBAAnB,SACC,uBAAMA,UAAU,qBAAqBC,SAXlB,SAAC5B,GACrBA,EAAE6B,iBACFxB,EAAO,CAAEgB,QAAOE,cASf,UACC,oBAAII,UAAU,2BAAd,+BAGA,uBACCG,KAAK,OACLC,YAAY,QACZJ,UAAU,2BACVK,SAAU,SAAChC,GAAD,OAAOsB,EAAStB,EAAEiC,OAAOhB,QACnCiB,UAAQ,IAGT,uBACCJ,KAAK,WACLC,YAAY,WACZJ,UAAU,2BACVK,SAAU,SAAChC,GAAD,OAAOwB,EAAYxB,EAAEiC,OAAOhB,QACtCiB,UAAQ,IAGT,uBACCP,UAAU,4BACVV,MAAM,QACNa,KAAK,WAELlC,EACA,qBAAK+B,UAAU,2BAAf,SAA2C/B,IAE3C,8BCwCUuC,EAtFE,WAChB,MAAwB1C,mBAAS,IAAjC,mBAAO2C,EAAP,KAAaC,EAAb,KAEA,EAA0B5C,mBAAS,IAAnC,mBAAO4B,EAAP,KAAcC,EAAd,KACA,EAAgC7B,mBAAS,IAAzC,mBAAO8B,EAAP,KAAiBC,EAAjB,KACA,EAAgC/B,mBAAS,IAAzC,mBAAO6C,EAAP,KAAiBC,EAAjB,KAGA,EAA0B9C,mBAAS,IAAnC,mBAAOG,EAAP,KAAcC,EAAd,KAEA,EAAwBJ,oBAAS,GAAjC,mBAAO+C,EAAP,KAAaC,EAAb,KAEM7B,EAAO,CACZwB,OAEAf,QACAE,WACAmB,gBAAiBJ,GAYlB,OAAIE,EACI,cAAC,IAAD,CAAUf,GAAI,CAAEC,SAAU,YAIjC,0BAASC,UAAU,mBAAnB,UACC,uBAAMA,UAAU,wBAAwBC,SAdrB,SAAC5B,GFtBC,IAACO,EEuBvBP,EAAE6B,kBFvBqBtB,EE0BZK,EFpBJJ,IACJC,KAAK,uBADD,eAEAF,IAEJG,MAAK,SAACC,GAAD,OAASA,EAAIC,QAAM,SAACG,GAAD,OAAS4B,QAAQC,OAAO7B,EAAI8B,SAASjC,KAAKkC,YEiBnEpC,MAAK,SAACqC,GAAD,OAAgBN,GAAQ,MAAO,SAAC1B,GAAD,OAASlB,EAASkB,OASvD,UACC,oBAAIY,UAAU,2BAAd,gCACA,uBACCG,KAAK,OACLC,YAAY,OACZJ,UAAU,8BACVK,SAAU,SAAChC,GAAD,OAAOqC,EAAQrC,EAAEiC,OAAOhB,QAClCiB,UAAQ,IAMT,uBACCJ,KAAK,QACLC,YAAY,QACZJ,UAAU,8BACVK,SAAU,SAAChC,GAAD,OAAOsB,EAAStB,EAAEiC,OAAOhB,QACnCiB,UAAQ,IAGT,uBACCJ,KAAK,WACLC,YAAY,WACZJ,UAAU,8BACVK,SAAU,SAAChC,GAAD,OAAOwB,EAAYxB,EAAEiC,OAAOhB,QACtCiB,UAAQ,IAGT,uBACCJ,KAAK,WACLC,YAAY,mBACZJ,UAAU,8BACVK,SAAU,SAAChC,GAAD,OAAOuC,EAAYvC,EAAEiC,OAAOhB,QACtCiB,UAAQ,IAKT,uBACCP,UAAU,gCACVV,MAAM,UACNa,KAAK,cAINlC,EAAQ,YAAc,OC9CXoD,EAlCA,WACd,MAA4B5B,qBAAW/B,GAA/BK,EAAR,EAAQA,OAAQS,EAAhB,EAAgBA,QAqBhB,OACC,sBAAKwB,UAAU,SAAf,UAEC,cAAC,IAAD,CAAMF,GAAG,IAAIE,UAAU,OAAvB,oBAIA,qBAAKA,UAAU,WAAf,SAzBGjC,EAEF,cAAC,IAAMuD,SAAP,UACC,cAAC,IAAD,CAAMtB,UAAU,UAAUF,GAAG,IAAIyB,QAAS/C,EAA1C,sBAOD,cAAC,IAAM8C,SAAP,UACC,cAAC,IAAD,CAAMtB,UAAU,UAAUF,GAAG,YAA7B,4BCcU,M,WA5Bb,aAAe,yBAFf0B,cAAgB,GAGd/E,KAAKgF,e,gDAGP,WAgBE,OAfAhF,KAAK+E,cAAgB3C,IAAM6C,OAAO,CAChCC,QAAS,GACTC,QAAS,MAGXnF,KAAK+E,cAAcK,aAAaC,QAAQC,KAAI,SAACC,GAC3C,IAAMtF,EAAQ4B,EAAYd,WAM1B,OAJId,IACFsF,EAAOC,QAAQC,cAAf,iBAAyCxF,IAGpCsF,KAGFvF,KAAK+E,gB,yBAGd,WACE,OAAO/E,KAAK+E,eAAiB/E,KAAKgF,mB,uDCdhCU,EAAcC,YAZG,CACrBC,OAAQ,0CACRC,WAAY,+BACZC,UAAW,eACXC,cAAe,2BACfC,kBAAmB,eACnBC,MAAO,8CAQHC,EAAiBC,YAAWT,GCb5BX,EAAgBqB,EAAaC,cAwDpBC,EArDG,SAACC,EAAOC,GACtB,MAAiCnF,mBAAS,GAA1C,mBAAOoF,EAAP,KAAkBC,EAAlB,KACA,EAA2BrF,mBAAS,IAApC,mBAAOG,EAAP,KAAeC,EAAf,KACA,EAAuBJ,mBAAS,IAAhC,mBAAOsF,EAAP,KAAaC,EAAb,KAH6B,4CAM7B,WAA0BD,EAAM3C,GAAhC,iBAAA6C,EAAA,6DACUrE,EAAO,CACTwB,OACA8C,KAAKH,GAETtG,QAAQC,IAAIkC,GALhB,SAM2BuC,EAAcgC,IAAI,uBAAuBvE,GANpE,cAMUiC,EANV,gBAQUA,EAASjC,KARnB,OAUInC,QAAQC,IAAI,aAAemE,EAASjC,MAVxC,2CAN6B,oEAkB7B,WAAwBmE,EAAM3C,GAA9B,iBAAA6C,EAAA,6DACUrE,EAAO,CACTwB,OACA8C,KAAKH,GAETtG,QAAQC,IAAIkC,GALhB,SAM2BuC,EAAc1C,KAAK,uBAAuBG,GANrE,cAMUiC,EANV,gBAQUA,EAASjC,KARnB,2CAlB6B,wBAkD7B,OA7CAnC,QAAQC,IAAI,SAAUiG,GAyBtBS,qBAAU,WACN,IAAMC,EAAaC,YAAIhB,EAAgBK,EAAK/D,KAAKwB,MAC3CA,EAAOuC,EAAK/D,KAAKwB,KACjBmD,EAAaC,YAAqBH,EAAaV,EAAK/D,MAC1D2E,EAAWE,GAAG,iBAAiB,SAACC,GAC5B,IAAIC,EAAcD,EAAKE,iBAAmBF,EAAKG,WAAc,IAC7Df,EAAYa,MACd,SAAC5E,GACClB,EAASkB,MACX,WACE+E,YAAeP,EAAWQ,SAAST,KAAK5E,MAAK,SAACsF,GAC9ChB,EAAOD,GACS,SAAbJ,EAAKC,IA1Ca,sCA2CjBqB,CAASD,EAAc5D,GA3CN,sCA6CjB8D,CAAWF,EAAcrB,EAAKC,aAGvC,CAACD,IAEG,CAACE,WAAWjF,QAAQmF,QCvChBoB,EAfE,SAAC,GAAsB,IAArBxB,EAAoB,EAApBA,KAAMyB,EAAc,EAAdA,QACrB,EAAwB1B,EAAWC,GAA5BI,EAAP,EAAOA,IAAKF,EAAZ,EAAYA,SASZ,OAPAO,qBAAU,WACHL,GACCqB,EAAQ,QAEd,CAACrB,EAAKqB,IAER3H,QAAQC,IAAIqG,EAAMF,GAEd,sBAAKlD,UAAU,WAAW0E,MAAO,CAACC,MAAMzB,EAAU,KAAlD,cAA0DA,EAA1D,UCTF1B,EAAgBqB,EAAaC,cA+DpB8B,EA7DG,WACjB,MAA2B9G,mBAAS,MAApC,mBAAQkF,EAAR,KAAeyB,EAAf,KACA,EAA2B3G,mBAAS,MAApC,mBAAQ+G,EAAR,KAAeC,EAAf,KACA,EAAyBhH,mBAAS,IAAlC,mBAAQiH,EAAR,KAAcC,EAAd,KAGAvB,qBAAU,WACTjC,EAAcyD,IAAI,UAAUlG,MAAK,SAAAC,GAAG,OAAI8F,EAAQ9F,EAAIC,WACnD,IAqBF,OACC,sBAAKe,UAAU,YAAf,UACC,uBAAMA,UAAU,iBAAhB,UACC,uBAAOkF,QAAQ,OAAf,uBACA,uBAAO/E,KAAK,OAAOgF,GAAG,OAAOnF,UAAU,uBAAuBS,KAAK,OAAOJ,SAAU,SAAChC,GAAD,OAAOoG,EAAQ,CAACxF,KAAKZ,EAAEiC,OAAO8E,MAAM,GAAGnC,IAAI5E,EAAEiC,OAAOG,aAIxIuC,GAAQ,cAAC,EAAD,CAAUA,KAAMA,EAAMyB,QAASA,IACxC,oBAAIzE,UAAU,kBAAd,qBACC+E,GAAO,oBAAI/E,UAAU,MAAd,SAAqB+E,IAE7B,yBAAS/E,UAAU,0BAAnB,SACE6E,EAAKO,MAAM,IAAMP,EAAKO,MAAMC,KAAI,SAACrC,EAAQsC,GACzC,OAAO,sBAAqBtF,UAAU,OAA/B,UACN,qBAAKuF,IAAKvC,EAAKO,OACf,qBAAIvD,UAAU,QAAd,cAAwBgD,EAAKvC,QAC7B,sBAAKT,UAAU,UAAf,UACA,uBAAOkF,QAAQ,SAASlF,UAAU,SAAlC,qBACA,uBAAOG,KAAK,OAAOgF,GAAG,SAAS1E,KAAMuC,EAAKvC,KAAMJ,SAAU,SAAChC,GAAD,OAAOoG,EAAQ,CAACxF,KAAKZ,EAAEiC,OAAO8E,MAAM,GAAGnC,IAAI5E,EAAEiC,OAAOG,UAG7G,wBAAQT,UAAU,QAAQS,KAAMuC,EAAKO,KAAMhC,QAAS,SAAAlD,GAAC,OApCrC,SAACA,GACtB,IAAM+E,EAAM/E,EAAEiC,OAAOG,KACrB3D,QAAQC,IAAIsB,EAAEiC,OAAOG,MACrB,IAAM+E,EAAKC,SAASC,cAAc,YAClCF,EAAGlG,MAAQ8D,EACXqC,SAASE,KAAKC,YAAYJ,GAC1BA,EAAGK,SACHJ,SAASK,YAAY,QACrBL,SAASE,KAAKI,YAAYP,GAE1BR,EAAO,iDA0BqDgB,CAAc3H,IAArE,qBACA,wBAAQ2B,UAAU,SAASS,KAAMuC,EAAKiD,IAAK1E,QAAS,SAAAlD,GAAC,OA1CxC,SAACA,GACnB,IAAM8G,EAAK9G,EAAEiC,OAAOG,KACpBe,EAAc0E,OAAd,iBAA+Bf,IAAMpG,MAAK,SAAAC,GAAG,OAAIgG,EAAOhG,EAAIC,KAAK8F,QAwCHoB,CAAW9H,IAApE,2BATe2E,EAAKvC,e,uBC/CpB,SAAS2F,EAAevI,GAC9B,IAAQ0B,EAAsB1B,EAAtB0B,SAAa8G,EAArB,YAA8BxI,EAA9B,GAEMyI,EAAYC,IAAMC,SAASC,KAAKlH,GACtC,OACC,cAAC,IAAD,2BACK8G,GADL,IAECK,OAAQ,SAAC7I,GAAD,OACPS,EAAYC,kBACXgI,IAAMI,aAAaL,EAAnB,2BAAmCD,GAASxI,IAE5C,cAAC,IAAD,CAAUiC,GAAI,CAAEC,SAAU,W,oBCXxB,SAAS6G,EAAc/I,GAC7B,IAAmBgJ,EAAuBhJ,EAAlCiJ,UAAyBT,EAAjC,YAA0CxI,EAA1C,GAEA,OACC,cAAC,IAAD,2BACKwI,GADL,IAECK,OAAQ,SAAC7I,GAAD,OACPS,EAAYC,kBACX,cAAC,IAAD,CAAUuB,GAAI,CAAEC,SAAU,gBAE1B,cAAC8G,EAAD,2BAAehJ,GAAWwI,QC6ChBU,MA3Cf,WACC,IAAMC,EAAOvH,qBAAW/B,GAMxB,OAJA+F,qBAAU,WACTuD,EAAK5I,mBACH,CAAC4I,IAGH,qBAAKhH,UAAU,UAAf,SAEC,eAAC,IAAD,WACC,cAAC,EAAD,IAEA,eAAC,IAAD,WACC,cAAC,IAAD,CAAOiH,OAAK,EAACC,KAAK,IAAlB,SACEF,EAAKjJ,OACL,cAAC,IAAD,CAAU+B,GAAG,eAEb,cAAC,IAAD,CAAUA,GAAG,aAMf,cAAC,IAAD,CAAOmH,OAAK,EAACC,KAAK,SAASJ,UAAWtH,IACtC,cAACoH,EAAD,CACCK,OAAK,EACLC,KAAK,YACLJ,UAAWtG,IAGZ,cAAC4F,EAAD,CAAgBa,OAAK,EAACC,KAAK,aAA3B,SACC,cAAC,EAAD,eCjCSC,MAVf,WACC,OACC,qBAAKnH,UAAU,MAAf,SACC,cAAC,EAAD,UACC,cAAC,EAAD,SCGWoH,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBvI,MAAK,YAAkD,IAA/CwI,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASlB,OACP,cAAC,IAAMmB,WAAP,UACE,cAAC,EAAD,MAEFpC,SAASqC,eAAe,SAM1BV,K","file":"static/js/main.b086ed1c.chunk.js","sourcesContent":["import * as jwt from \"jsonwebtoken\";\r\nimport * as moment from \"moment\";\r\n\r\nclass AuthService {\r\n  tokenKey = \"auth_token\";\r\n\r\n  getToken() {\r\n    return localStorage.getItem(this.tokenKey);\r\n  }\r\n\r\n\r\n\r\n  decode(token) {\r\n    return jwt.decode(JSON.parse(token));\r\n  }\r\n\r\n  saveToken(token) {\r\n    console.log(token);\r\n    localStorage.setItem(this.tokenKey, JSON.stringify(token.token));\r\n  }\r\n\r\n  invalidateUser() {\r\n    localStorage.removeItem(this.tokenKey);\r\n  }\r\n\r\n  getExpiration(token) {\r\n    const exp = this.decode(token).exp;\r\n\r\n    return moment.unix(exp);\r\n  }\r\n\r\n  isValid(token) {\r\n    return moment().isBefore(this.getExpiration(token));\r\n  }\r\n\r\n  isAuthenticated() {\r\n    const token = this.getToken();\r\n\r\n    return token && this.isValid(token) ? true : false;\r\n  }\r\n}\r\n\r\nexport default new AuthService();\r\n","import React, { createContext, useState } from \"react\";\r\nimport authService from \"../services/auth-service\";\r\nimport * as actions from \"../components/auth/login/actions\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nconst AuthContextProvider = (props) => {\r\n\tconst [isAuth, setState] = useState(false);\r\n\tconst [error, setError] = useState(\"\");\r\n\r\n\tconst checkAuthState = (e) => {\r\n\t\tif (authService.isAuthenticated()) {\r\n\t\t\tsetState(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst isAuthenticated = () => {\r\n\t\treturn authService.isAuthenticated();\r\n\t};\r\n\r\n\tconst signOut = () => {\r\n\t\tauthService.invalidateUser();\r\n\t\tsetState(false);\r\n\t\tsetError(\"\");\r\n\t};\r\n\r\n\tconst signIn = (loginData) => {\r\n\t\treturn actions\r\n\t\t\t.login(loginData)\r\n\t\t\t.then((token) => {\r\n\t\t\t\tauthService.saveToken(token);\r\n\t\t\t\tsetState(true);\r\n\r\n\t\t\t\treturn token;\r\n\t\t\t})\r\n\t\t\t.catch((err) => setError(\"Email or Password is Incorrect !\"));\r\n\t};\r\n\r\n\tconst authAPI = {\r\n\t\tcheckAuthState,\r\n\t\tsignOut,\r\n\t\tsignIn,\r\n\t\tisAuth,\r\n\t\terror,\r\n\t\tisAuthenticated,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={authAPI}>\r\n\t\t\t{props.children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default AuthContextProvider;\r\n","import axios from \"axios\";\r\nimport authService from \"../../../services/auth-service\";\r\n\r\nexport const register = (userData) => {\r\n  // return axios\r\n  //   .post(\"/api/v1/shops/signup\", {\r\n  //     ...userData,\r\n  //   })\r\n  //   .then((res) => res.data, (err) => Promise.reject(err.response.data.errors));\r\n  return axios\r\n    .post(\"/api/v1/users/signup\", {\r\n      ...userData,\r\n    })\r\n    .then((res) => res.data, (err) => Promise.reject(err.response.data.errors));\r\n};\r\n\r\nexport const checkAuthState = (e) => {\r\n  if (authService.isAuthenticated()) {\r\n    return true;\r\n  }\r\n};\r\n\r\nexport const getSellerName = () => {\r\n  return axios\r\n  .get(\"/api/v1/users/\")\r\n  .then((res) => res.data)\r\n  .catch((error) => console.log(error));\r\n};\r\n\r\nexport const login = (userData) => {\r\n  // return axios\r\n  //   .post(\"https://apicoopinn.herokuapp.com/api/v1/shops/login\", {\r\n  //     ...userData,\r\n  //   })\r\n  //   .then((res) => res.data)\r\n  //   .catch((error) => console.log(error));\r\n  return axios\r\n    .post(\"/api/v1/users/login\", { ...userData })\r\n    .then((res) => res.data)\r\n    .catch((error) => console.log(error));\r\n};\r\n\r\nexport const logout = () => {\r\n  authService.invalidateUser();\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { AuthContext } from \"../../../contexts/AuthContext\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport '../../../App.css';\r\n\r\nconst Login = () => {\r\n\tconst { isAuth, error, signIn } = useContext(AuthContext);\r\n\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tsignIn({ email, password });\r\n\t};\r\n\r\n\tif (isAuth) {\r\n\t\treturn <Redirect to={{ pathname: \"/dashboard\" }} />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"login_section\">\r\n\t\t\t<form className=\"login_section_form\" onSubmit={handleSubmit}>\r\n\t\t\t\t<h2 className=\"login_section_form_title\">\r\n\t\t\t\t\tWelcome To Intern\r\n\t\t\t\t</h2>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\tclassName=\"login_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\tclassName=\"login_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"login_section_form_submit\"\r\n\t\t\t\t\tvalue=\"Login\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t/>\r\n\t\t\t\t{error ? (\r\n\t\t\t\t\t<div className=\"login_section_form_error\">{error}</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div />\r\n\t\t\t\t)}\r\n\t\t\t</form>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport * as actions from \"./actions\";\r\n\r\nconst Register = () => {\r\n\tconst [name, setName] = useState(\"\");\r\n\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [passconf, setPassconf] = useState(\"\");\r\n\r\n\r\n\tconst [error, setError] = useState(\"\");\r\n\r\n\tconst [flag, setFlag] = useState(false);\r\n\r\n\tconst data = {\r\n\t\tname,\r\n\t\t\r\n\t\temail,\r\n\t\tpassword,\r\n\t\tpasswordConfirm: passconf,\r\n\t\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tactions\r\n\t\t\t.register(data)\r\n\t\t\t.then((registered) => setFlag(true), (err) => setError(err));\r\n\t};\r\n\r\n\tif (flag) {\r\n\t\treturn <Redirect to={{ pathname: \"/login\" }} />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"register_section\">\r\n\t\t\t<form className=\"register_section_form\" onSubmit={handleSubmit}>\r\n\t\t\t\t<h2 className=\"login_section_form_title\">Start Your Journey</h2>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\tclassName=\"register_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setName(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\tclassName=\"register_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\tclassName=\"register_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Confirm Password\"\r\n\t\t\t\t\tclassName=\"register_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setPassconf(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"register_section_form_submit \"\r\n\t\t\t\t\tvalue=\"Sign Up\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t/>\r\n\t\t\t</form>\r\n\r\n\t\t\t{error ? \"error yes\" : \"\"}\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default Register;\r\n","import React, { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../contexts/AuthContext\";\r\nimport '../../App.css';\r\n\r\nconst Header = () => {\r\n\tconst { isAuth, signOut } = useContext(AuthContext);\r\n\r\n\tconst renderLink = () => {\r\n\t\tif (isAuth) {\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Link className=\"navlink\" to=\"/\" onClick={signOut}>\r\n\t\t\t\t\t\tlogout\r\n\t\t\t\t\t</Link>\t\t\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Link className=\"navlink\" to=\"/register\">\r\n\t\t\t\t\t\tSignup\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"header\">\r\n\t\t\t{/*<img src={logoCo} />*/}\r\n\t\t\t<Link to=\"/\" className=\"logo\">\r\n\t\t\t\tIntern\r\n\t\t\t</Link>\r\n\r\n\t\t\t<nav className=\"navlinks\">{renderLink()}</nav>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","import axios from \"axios\";\r\nimport authService from \"./auth-service\";\r\n\r\nclass AxiosService {\r\n  axiosInstance = {};\r\n\r\n  constructor() {\r\n    this.initInstance();\r\n  }\r\n\r\n  initInstance() {\r\n    this.axiosInstance = axios.create({\r\n      baseURL: \"\",\r\n      timeout: 2000,\r\n    });\r\n\r\n    this.axiosInstance.interceptors.request.use((config) => {\r\n      const token = authService.getToken();\r\n\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n\r\n      return config;\r\n    });\r\n\r\n    return this.axiosInstance;\r\n  }\r\n\r\n  getInstance() {\r\n    return this.axiosInstance || this.initInstance();\r\n  }\r\n}\r\n\r\nexport default new AxiosService();\r\n","import {initializeApp} from \"firebase/app\";\r\nimport {getStorage ,ref , uploadBytesResumable, getDownloadURL} from 'firebase/storage';\r\n\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCPcL3DmxrQxGsVvTeABfdD8ExghVuKXi4\",\r\n  authDomain: \"intern-b5c3a.firebaseapp.com\",\r\n  projectId: \"intern-b5c3a\",\r\n  storageBucket: \"intern-b5c3a.appspot.com\",\r\n  messagingSenderId: \"100729861313\",\r\n  appId: \"1:100729861313:web:f561620ba50e6c60895040\"\r\n};\r\n\r\n\r\n\r\n\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\n\r\nconst projectStorage = getStorage(firebaseApp);\r\n\r\nexport {projectStorage , ref ,uploadBytesResumable, getDownloadURL};","import { updateMetadata } from '@firebase/storage';\r\nimport React, { useState, useEffect } from 'react'\r\nimport {projectStorage , ref , uploadBytesResumable, getDownloadURL} from '../firebase/config';\r\nimport axiosService from \"../services/axios-service\";\r\n\r\nconst axiosInstance = axiosService.getInstance();\r\n\r\n\r\nconst useStorage =(file , btn)=> {\r\n    const [progress , setProgress] = useState(0);\r\n    const [error , setError] = useState(\"\");\r\n    const [url , setUrl] = useState(\"\");\r\n\r\n    console.log(\"in ss:\", file);\r\n    async function updateData(url , name) {\r\n        const data = {\r\n            name,\r\n            link:url\r\n        }\r\n        console.log(data);\r\n        const response = await axiosInstance.put(\"/api/v1/files/update\",data) ;\r\n    \r\n        await response.data;\r\n        \r\n        console.log(\"response: \" , response.data);\r\n      }\r\n    async function postData(url , name) {\r\n        const data = {\r\n            name,\r\n            link:url\r\n        }\r\n        console.log(data);\r\n        const response = await axiosInstance.post(\"/api/v1/files/upload\",data) ;\r\n    \r\n        await response.data;\r\n    \r\n      }\r\n\r\n    useEffect(()=>{\r\n        const storageRef = ref(projectStorage ,file.data.name);\r\n        const name = file.data.name ;\r\n        const uploadTask = uploadBytesResumable(storageRef , file.data);\r\n        uploadTask.on('state_changed', (snap) => {\r\n            let percentage = (snap.bytesTransferred / snap.totalBytes) * 100 ;\r\n            setProgress(percentage);\r\n        },(err)=>{\r\n            setError(err);\r\n        },()=>{\r\n            getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\r\n            setUrl(url);\r\n            if(file.btn === \"file\"){\r\n                postData(downloadURL , name);\r\n            }else{\r\n                updateData(downloadURL , file.btn);\r\n            }\r\n        })}\r\n    )},[file])\r\n\r\n    return {progress , error , url}\r\n}\r\n\r\nexport default useStorage;","import React, { useState, useEffect } from 'react'\r\nimport useStorage from '../hooks/useStorage';\r\nimport '../App.css'; \r\n\r\nconst Progress = ({file, setFile }) => {\r\n    const {url ,progress} = useStorage(file );\r\n\r\n    useEffect(()=>{\r\n        if(url){\r\n            setFile(null);\r\n        }\r\n    },[url, setFile]);\r\n\r\n    console.log(url , progress);\r\n    return (\r\n        <div className=\"progress\" style={{width:progress+ '%'}}> {progress} % </div>\r\n    )\r\n}\r\n\r\nexport default Progress;","import React, { useState, useEffect } from \"react\";\r\nimport axiosService from \"../../services/axios-service\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport * as actions from \"../auth/login/actions\";\r\nimport Progress from '../Progress'\r\n\r\nconst axiosInstance = axiosService.getInstance();\r\n\r\nconst Dashboard = () => {\r\n\tconst [ file , setFile ] = useState(null);\r\n\tconst [ user , setUser ] = useState(null);\r\n\tconst [ msg , setMsg ] = useState(\"\");\r\n\r\n\r\n\tuseEffect(()=>{\r\n\t\taxiosInstance.get(\"/users\").then(res => setUser(res.data));\r\n\t},[]);\r\n\r\n\tconst deleteFile = (e) => {\r\n\t\tconst id = e.target.name;\r\n\t\taxiosInstance.delete(`/files/${id}`).then(res => setMsg(res.data.msg));\r\n\t};\r\n\r\n\tconst copyClipboard = (e) => {\r\n\t\tconst url = e.target.name;\r\n\t\tconsole.log(e.target.name);\r\n\t\tconst el = document.createElement('textarea');\r\n\t\tel.value = url;\r\n\t\tdocument.body.appendChild(el);\r\n\t\tel.select();\r\n\t\tdocument.execCommand('copy');\r\n\t\tdocument.body.removeChild(el);\r\n\r\n\t\tsetMsg(\"Copy to Clipboard Sucessfully! Share the link\");\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"dashboard\">\r\n\t\t\t<form className=\"dashboard_form\">\r\n\t\t\t\t<label htmlFor=\"file\">Add File </label>\r\n\t\t\t\t<input type=\"file\" id=\"file\" className=\"dashboard_form_input\" name=\"file\" onChange={(e) => setFile({data:e.target.files[0],btn:e.target.name})} />\r\n\r\n\t\t\t\t\r\n\t\t\t</form>\r\n\t\t\t{file && <Progress file={file} setFile={setFile} />}\r\n\t\t\t<h3 className=\"dashboard_files\"> Files </h3>\r\n\t\t\t{msg && <h3 className=\"msg\">{msg}</h3>}\r\n\r\n\t\t\t<section className=\"dashboard_files_section\">\r\n\t\t\t\t{user.files[0] && user.files.map((file  , key)=> {\r\n\t\t\t\t\treturn <div key={file.name} className=\"file\"> \r\n\t\t\t\t\t\t<img src={file.link}/>\r\n\t\t\t\t\t\t<h5 className=\"title\"> {file.name}</h5>\r\n\t\t\t\t\t\t<div className=\"actions\">\r\n\t\t\t\t\t\t<label htmlFor=\"update\" className=\"update\">Update </label>\r\n\t\t\t\t\t\t<input type=\"file\" id=\"update\" name={file.name} onChange={(e) => setFile({data:e.target.files[0],btn:e.target.name})} />\r\n\r\n\r\n\t\t\t\t\t\t\t<button className=\"share\" name={file.link} onClick={e=>copyClipboard(e)}> Share </button>\r\n\t\t\t\t\t\t\t<button className=\"delete\" name={file._id} onClick={e => deleteFile(e)}> Delete </button>\r\n\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t})}\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Dashboard;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authService from \"../../../services/auth-service\";\r\n\r\nexport function ProtectedRoute(props) {\r\n\tconst { children, ...rest } = props;\r\n\r\n\tconst onlyChild = React.Children.only(children);\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={(props) =>\r\n\t\t\t\tauthService.isAuthenticated() ? (\r\n\t\t\t\t\tReact.cloneElement(onlyChild, { ...rest, ...props })\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to={{ pathname: \"/\" }} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authService from \"../../../services/auth-service\";\r\n\r\nexport function LoggedInRoute(props) {\r\n\tconst { component: Component, ...rest } = props;\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={(props) =>\r\n\t\t\t\tauthService.isAuthenticated() ? (\r\n\t\t\t\t\t<Redirect to={{ pathname: \"/dashboard\" }} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Component {...props} {...rest} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n}\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { Route, Redirect, BrowserRouter, Switch } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\nimport Login from \"./auth/login/login\";\r\nimport Register from \"./auth/login/register\";\r\n\r\nimport Header from \"./shared/Header\";\r\n\r\n\r\nimport Dashboard from \"./dashboard/Dashboard\";\r\n\r\n\r\nimport { ProtectedRoute } from \"./shared/auth/ProtectedRoute\";\r\nimport { LoggedInRoute } from \"./shared/auth/LoggedInRoute\";\r\n\r\nfunction Root() {\r\n\tconst auth = useContext(AuthContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tauth.checkAuthState();\r\n\t}, [auth]);\r\n\r\n\treturn (\r\n\t\t<div className=\"mainApp\">\r\n\t\t\t\r\n\t\t\t<BrowserRouter>\r\n\t\t\t\t<Header />\r\n\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t{auth.isAuth ? (\r\n\t\t\t\t\t\t\t<Redirect to=\"/dashboard\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Redirect to=\"/login\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\t\t<Route exact path=\"/login\" component={Login} />\r\n\t\t\t\t\t<LoggedInRoute\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath=\"/register\"\r\n\t\t\t\t\t\tcomponent={Register}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<ProtectedRoute exact path=\"/dashboard\">\r\n\t\t\t\t\t\t<Dashboard />\r\n\t\t\t\t\t</ProtectedRoute>\r\n\t\t\t\t\t\r\n\t\t\t\t</Switch>\r\n\r\n\t\t\t\t\r\n\t\t\t</BrowserRouter>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Root;\r\n","import React from \"react\";\nimport \"./App.css\";\n\nimport AuthContextProvider from \"./contexts/AuthContext\";\nimport Root from \"./components/root\";\nfunction App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<AuthContextProvider>\n\t\t\t\t<Root />\n\t\t\t</AuthContextProvider>\n\t\t</div>\n\t);\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}