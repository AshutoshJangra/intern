(this.webpackJsonpassign=this.webpackJsonpassign||[]).push([[0],{171:function(e,t,n){},175:function(e,t){},177:function(e,t){},191:function(e,t){},193:function(e,t){},221:function(e,t){},223:function(e,t){},224:function(e,t){},229:function(e,t){},231:function(e,t){},237:function(e,t){},239:function(e,t){},258:function(e,t){},270:function(e,t){},273:function(e,t){},314:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(162),i=n.n(s),r=(n(171),n(51),n(23)),o=n(11),u=n(7),l=n(6),j=n(13),d=n(163),O=n(89),b=new(function(){function e(){Object(l.a)(this,e),this.tokenKey="auth_token"}return Object(j.a)(e,[{key:"getToken",value:function(){return localStorage.getItem(this.tokenKey)}},{key:"decode",value:function(e){return d.decode(JSON.parse(e))}},{key:"saveToken",value:function(e){console.log(e),localStorage.setItem(this.tokenKey,JSON.stringify(e.token))}},{key:"invalidateUser",value:function(){localStorage.removeItem(this.tokenKey)}},{key:"getExpiration",value:function(e){var t=this.decode(e).exp;return O.unix(t)}},{key:"isValid",value:function(e){return O().isBefore(this.getExpiration(e))}},{key:"isAuthenticated",value:function(){var e=this.getToken();return!(!e||!this.isValid(e))}}]),e}()),f=n(18),h=n(41),m=n.n(h),p=n(1),_=Object(a.createContext)(),g=function(){var e=Object(a.useContext)(_),t=e.isAuth,n=e.error,c=e.signIn,s=Object(a.useState)(""),i=Object(u.a)(s,2),r=i[0],l=i[1],j=Object(a.useState)(""),d=Object(u.a)(j,2),O=d[0],b=d[1];return t?Object(p.jsx)(o.a,{to:{pathname:"/dashboard"}}):Object(p.jsx)("section",{className:"login_section",children:Object(p.jsxs)("form",{className:"login_section_form",onSubmit:function(e){e.preventDefault(),c({email:r,password:O})},children:[Object(p.jsx)("h2",{className:"login_section_form_title",children:"Welcome To Intern"}),Object(p.jsx)("input",{type:"text",placeholder:"Email",className:"login_section_form_input",onChange:function(e){return l(e.target.value)},required:!0}),Object(p.jsx)("input",{type:"password",placeholder:"Password",className:"login_section_form_input",onChange:function(e){return b(e.target.value)},required:!0}),Object(p.jsx)("input",{className:"login_section_form_submit",value:"Login",type:"submit"}),n?Object(p.jsx)("div",{className:"login_section_form_error",children:n}):Object(p.jsx)("div",{})]})})},x=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),r=i[0],l=i[1],j=Object(a.useState)(""),d=Object(u.a)(j,2),O=d[0],b=d[1],h=Object(a.useState)(""),_=Object(u.a)(h,2),g=_[0],x=_[1],S=Object(a.useState)(""),v=Object(u.a)(S,2),E=v[0],T=v[1],N=Object(a.useState)(!1),C=Object(u.a)(N,2),y=C[0],k=C[1],D={name:n,email:r,password:O,passwordConfirm:g};return y?Object(p.jsx)(o.a,{to:{pathname:"/login"}}):Object(p.jsxs)("section",{className:"register_section",children:[Object(p.jsxs)("form",{className:"register_section_form",onSubmit:function(e){var t;e.preventDefault(),(t=D,m.a.post("/api/v1/users/signup",Object(f.a)({},t)).then((function(e){return e.data}),(function(e){return Promise.reject(e.response.data.errors)}))).then((function(e){return k(!0)}),(function(e){return T(e)}))},children:[Object(p.jsx)("h2",{className:"login_section_form_title",children:"Start Your Journey"}),Object(p.jsx)("input",{type:"text",placeholder:"Name",className:"register_section_form_input",onChange:function(e){return c(e.target.value)},required:!0}),Object(p.jsx)("input",{type:"email",placeholder:"Email",className:"register_section_form_input",onChange:function(e){return l(e.target.value)},required:!0}),Object(p.jsx)("input",{type:"password",placeholder:"Password",className:"register_section_form_input",onChange:function(e){return b(e.target.value)},required:!0}),Object(p.jsx)("input",{type:"password",placeholder:"Confirm Password",className:"register_section_form_input",onChange:function(e){return x(e.target.value)},required:!0}),Object(p.jsx)("input",{className:"register_section_form_submit ",value:"Sign Up",type:"submit"})]}),E?"error yes":""]})},S=function(){var e=Object(a.useContext)(_),t=e.isAuth,n=e.signOut;return Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)(r.b,{to:"/",className:"logo",children:"Intern"}),Object(p.jsx)("nav",{className:"navlinks",children:t?Object(p.jsx)(c.a.Fragment,{children:Object(p.jsx)(r.b,{className:"navlink",to:"/",onClick:n,children:"logout"})}):Object(p.jsx)(c.a.Fragment,{children:Object(p.jsx)(r.b,{className:"navlink",to:"/register",children:"Signup"})})})]})},v=new(function(){function e(){Object(l.a)(this,e),this.axiosInstance={},this.initInstance()}return Object(j.a)(e,[{key:"initInstance",value:function(){return this.axiosInstance=m.a.create({baseURL:"/api/v1",timeout:2e3}),this.axiosInstance.interceptors.request.use((function(e){var t=b.getToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),this.axiosInstance}},{key:"getInstance",value:function(){return this.axiosInstance||this.initInstance()}}]),e}()),E=n(5),T=n.n(E),N=n(15),C=(n(88),n(166)),y=n(48),k={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_DOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).APP_ID},D=Object(C.a)(k),I=Object(y.b)(D),A=v.getInstance(),P=function(e,t){var n=Object(a.useState)(0),c=Object(u.a)(n,2),s=c[0],i=c[1],r=Object(a.useState)(""),o=Object(u.a)(r,2),l=o[0],j=o[1],d=Object(a.useState)(""),O=Object(u.a)(d,2),b=O[0],f=O[1];function h(){return h=Object(N.a)(T.a.mark((function e(t,n){var a,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:n,link:t},console.log(a),e.next=4,A.put("/api/v1/files/update",a);case 4:return c=e.sent,e.next=7,c.data;case 7:console.log("response: ",c.data);case 8:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(){return m=Object(N.a)(T.a.mark((function e(t,n){var a,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:n,link:t},console.log(a),e.next=4,A.post("/api/v1/files/upload",a);case 4:return c=e.sent,e.next=7,c.data;case 7:console.log("response: ",c.data);case 8:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}return console.log("in ss:",e),Object(a.useEffect)((function(){var t=Object(y.c)(I,e.data.name),n=e.data.name,a=Object(y.d)(t,e.data);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;i(t)}),(function(e){j(e)}),(function(){Object(y.a)(a.snapshot.ref).then((function(t){f(b),"file"===e.btn?function(e,t){m.apply(this,arguments)}(t,n):function(e,t){h.apply(this,arguments)}(t,e.btn)}))}))}),[e]),{progress:s,error:l,url:b}},R=function(e){var t=e.file,n=e.setFile,c=P(t),s=c.url,i=c.progress;return Object(a.useEffect)((function(){s&&n(null)}),[s,n]),console.log(s,i),Object(p.jsxs)("div",{className:"progress",style:{width:i+"%"},children:[" ",i," % "]})},K=v.getInstance(),F=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(u.a)(s,2),r=i[0],o=i[1],l=Object(a.useState)(""),j=Object(u.a)(l,2),d=j[0],O=j[1];Object(a.useEffect)((function(){K.get("/users").then((function(e){return o(e.data)}))}),[]);return Object(p.jsxs)("div",{className:"dashboard",children:[Object(p.jsxs)("form",{className:"dashboard_form",children:[Object(p.jsx)("label",{htmlFor:"file",children:"Add File "}),Object(p.jsx)("input",{type:"file",id:"file",className:"dashboard_form_input",name:"file",onChange:function(e){return c({data:e.target.files[0],btn:e.target.name})}})]}),n&&Object(p.jsx)(R,{file:n,setFile:c}),Object(p.jsx)("h3",{className:"dashboard_files",children:" Files "}),d&&Object(p.jsx)("h3",{className:"msg",children:d}),Object(p.jsx)("section",{className:"dashboard_files_section",children:r&&r.files.map((function(e,t){return Object(p.jsxs)("div",{className:"file",children:[Object(p.jsx)("img",{src:e.link}),Object(p.jsxs)("h5",{className:"title",children:[" ",e.name]}),Object(p.jsxs)("div",{className:"actions",children:[Object(p.jsx)("label",{htmlFor:"update",className:"update",children:"Update "}),Object(p.jsx)("input",{type:"file",id:"update",name:e.name,onChange:function(e){return c({data:e.target.files[0],btn:e.target.name})}}),Object(p.jsx)("button",{className:"share",name:e.link,onClick:function(e){return function(e){var t=e.target.name;console.log(e.target.name);var n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),O("Copy to Clipboard Sucessfully! Share the link")}(e)},children:" Share "}),Object(p.jsx)("button",{className:"delete",name:e._id,onClick:function(e){return function(e){var t=e.target.name;K.delete("/files/".concat(t)).then((function(e){return O(e.data.msg)}))}(e)},children:" Delete "})]})]},e.name)}))})]})},H=n(60),W=["children"];function w(e){var t=e.children,n=Object(H.a)(e,W),a=c.a.Children.only(t);return Object(p.jsx)(o.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return b.isAuthenticated()?c.a.cloneElement(a,Object(f.a)(Object(f.a)({},n),e)):Object(p.jsx)(o.a,{to:{pathname:"/"}})}}))}var U=["component"];function L(e){var t=e.component,n=Object(H.a)(e,U);return Object(p.jsx)(o.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return b.isAuthenticated()?Object(p.jsx)(o.a,{to:{pathname:"/dashboard"}}):Object(p.jsx)(t,Object(f.a)(Object(f.a)({},e),n))}}))}var B=function(){var e=Object(a.useContext)(_);return Object(a.useEffect)((function(){e.checkAuthState()}),[e]),Object(p.jsx)("div",{className:"mainApp",children:Object(p.jsxs)(r.a,{children:[Object(p.jsx)(S,{}),Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{exact:!0,path:"/",children:e.isAuth?Object(p.jsx)(o.a,{to:"/dashboard"}):Object(p.jsx)(o.a,{to:"/login"})}),Object(p.jsx)(o.b,{exact:!0,path:"/login",component:g}),Object(p.jsx)(L,{exact:!0,path:"/register",component:x}),Object(p.jsx)(w,{exact:!0,path:"/dashboard",children:Object(p.jsx)(F,{})})]})]})})};var V=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(B,{})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(V,{})}),document.getElementById("root")),q()},51:function(e,t,n){}},[[314,1,2]]]);
//# sourceMappingURL=main.493a9f93.chunk.js.map