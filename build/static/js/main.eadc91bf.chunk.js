(this.webpackJsonpassign=this.webpackJsonpassign||[]).push([[0],{171:function(e,t,n){},175:function(e,t){},177:function(e,t){},191:function(e,t){},193:function(e,t){},221:function(e,t){},223:function(e,t){},224:function(e,t){},229:function(e,t){},231:function(e,t){},237:function(e,t){},239:function(e,t){},258:function(e,t){},270:function(e,t){},273:function(e,t){},314:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(162),i=n.n(s),r=(n(171),n(51),n(7)),o=n(6),u=n(13),l=n(163),j=n(89),d=new(function(){function e(){Object(o.a)(this,e),this.tokenKey="auth_token"}return Object(u.a)(e,[{key:"getToken",value:function(){return localStorage.getItem(this.tokenKey)}},{key:"decode",value:function(e){return l.decode(JSON.parse(e))}},{key:"saveToken",value:function(e){console.log(e),localStorage.setItem(this.tokenKey,JSON.stringify(e.token))}},{key:"invalidateUser",value:function(){localStorage.removeItem(this.tokenKey)}},{key:"getExpiration",value:function(e){var t=this.decode(e).exp;return j.unix(t)}},{key:"isValid",value:function(e){return j().isBefore(this.getExpiration(e))}},{key:"isAuthenticated",value:function(){var e=this.getToken();return!(!e||!this.isValid(e))}}]),e}()),O=n(18),b=n(41),f=n.n(b),h=n(1),m=Object(a.createContext)(),p=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(""),o=Object(r.a)(i,2),u=o[0],l=o[1],j={checkAuthState:function(e){d.isAuthenticated()&&s(!0)},signOut:function(){d.invalidateUser(),s(!1),l("")},signIn:function(e){return(t=e,f.a.post("/api/v1/users/login",Object(O.a)({},t)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))).then((function(e){return d.saveToken(e),s(!0),e})).catch((function(e){return l("Email or Password is Incorrect !")}));var t},isAuth:c,error:u,isAuthenticated:function(){return d.isAuthenticated()}};return Object(h.jsx)(m.Provider,{value:j,children:e.children})},_=n(23),g=n(11),v=function(){var e=Object(a.useContext)(m),t=e.isAuth,n=e.error,c=e.signIn,s=Object(a.useState)(""),i=Object(r.a)(s,2),o=i[0],u=i[1],l=Object(a.useState)(""),j=Object(r.a)(l,2),d=j[0],O=j[1];return t?Object(h.jsx)(g.a,{to:{pathname:"/dashboard"}}):Object(h.jsx)("section",{className:"login_section",children:Object(h.jsxs)("form",{className:"login_section_form",onSubmit:function(e){e.preventDefault(),c({email:o,password:d})},children:[Object(h.jsx)("h2",{className:"login_section_form_title",children:"Welcome To Intern"}),Object(h.jsx)("input",{type:"text",placeholder:"Email",className:"login_section_form_input",onChange:function(e){return u(e.target.value)},required:!0}),Object(h.jsx)("input",{type:"password",placeholder:"Password",className:"login_section_form_input",onChange:function(e){return O(e.target.value)},required:!0}),Object(h.jsx)("input",{className:"login_section_form_submit",value:"Login",type:"submit"}),n?Object(h.jsx)("div",{className:"login_section_form_error",children:n}):Object(h.jsx)("div",{})]})})},S=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(r.a)(s,2),o=i[0],u=i[1],l=Object(a.useState)(""),j=Object(r.a)(l,2),d=j[0],b=j[1],m=Object(a.useState)(""),p=Object(r.a)(m,2),_=p[0],v=p[1],S=Object(a.useState)(""),x=Object(r.a)(S,2),E=x[0],T=x[1],N=Object(a.useState)(!1),C=Object(r.a)(N,2),y=C[0],k=C[1],I={name:n,email:o,password:d,passwordConfirm:_};return y?Object(h.jsx)(g.a,{to:{pathname:"/login"}}):Object(h.jsxs)("section",{className:"register_section",children:[Object(h.jsxs)("form",{className:"register_section_form",onSubmit:function(e){var t;e.preventDefault(),(t=I,f.a.post("/api/v1/users/signup",Object(O.a)({},t)).then((function(e){return e.data}),(function(e){return Promise.reject(e.response.data.errors)}))).then((function(e){return k(!0)}),(function(e){return T(e)}))},children:[Object(h.jsx)("h2",{className:"login_section_form_title",children:"Start Your Journey"}),Object(h.jsx)("input",{type:"text",placeholder:"Name",className:"register_section_form_input",onChange:function(e){return c(e.target.value)},required:!0}),Object(h.jsx)("input",{type:"email",placeholder:"Email",className:"register_section_form_input",onChange:function(e){return u(e.target.value)},required:!0}),Object(h.jsx)("input",{type:"password",placeholder:"Password",className:"register_section_form_input",onChange:function(e){return b(e.target.value)},required:!0}),Object(h.jsx)("input",{type:"password",placeholder:"Confirm Password",className:"register_section_form_input",onChange:function(e){return v(e.target.value)},required:!0}),Object(h.jsx)("input",{className:"register_section_form_submit ",value:"Sign Up",type:"submit"})]}),E?"error yes":""]})},x=function(){var e=Object(a.useContext)(m),t=e.isAuth,n=e.signOut;return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)(_.b,{to:"/",className:"logo",children:"Intern"}),Object(h.jsx)("nav",{className:"navlinks",children:t?Object(h.jsx)(c.a.Fragment,{children:Object(h.jsx)(_.b,{className:"navlink",to:"/",onClick:n,children:"logout"})}):Object(h.jsx)(c.a.Fragment,{children:Object(h.jsx)(_.b,{className:"navlink",to:"/register",children:"Signup"})})})]})},E=new(function(){function e(){Object(o.a)(this,e),this.axiosInstance={},this.initInstance()}return Object(u.a)(e,[{key:"initInstance",value:function(){return this.axiosInstance=f.a.create({baseURL:"/api/v1",timeout:2e3}),this.axiosInstance.interceptors.request.use((function(e){var t=d.getToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),this.axiosInstance}},{key:"getInstance",value:function(){return this.axiosInstance||this.initInstance()}}]),e}()),T=n(5),N=n.n(T),C=n(15),y=(n(88),n(166)),k=n(48),I={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_DOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).APP_ID},A=Object(y.a)(I),D=Object(k.b)(A),P=E.getInstance(),R=function(e,t){var n=Object(a.useState)(0),c=Object(r.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(""),u=Object(r.a)(o,2),l=u[0],j=u[1],d=Object(a.useState)(""),O=Object(r.a)(d,2),b=O[0],f=O[1];function h(){return h=Object(C.a)(N.a.mark((function e(t,n){var a,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:n,link:t},console.log(a),e.next=4,P.put("/api/v1/files/update",a);case 4:return c=e.sent,e.next=7,c.data;case 7:console.log("response: ",c.data);case 8:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(){return m=Object(C.a)(N.a.mark((function e(t,n){var a,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:n,link:t},console.log(a),e.next=4,P.post("/api/v1/files/upload",a);case 4:return c=e.sent,e.next=7,c.data;case 7:console.log("response: ",c.data);case 8:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}return console.log("in ss:",e),Object(a.useEffect)((function(){var t=Object(k.c)(D,e.data.name),n=e.data.name,a=Object(k.d)(t,e.data);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;i(t)}),(function(e){j(e)}),(function(){Object(k.a)(a.snapshot.ref).then((function(t){f(b),"file"===e.btn?function(e,t){m.apply(this,arguments)}(t,n):function(e,t){h.apply(this,arguments)}(t,e.btn)}))}))}),[e]),{progress:s,error:l,url:b}},K=function(e){var t=e.file,n=e.setFile,c=R(t),s=c.url,i=c.progress;return Object(a.useEffect)((function(){s&&n(null)}),[s,n]),console.log(s,i),Object(h.jsxs)("div",{className:"progress",style:{width:i+"%"},children:[" ",i," % "]})},F=E.getInstance(),w=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(r.a)(s,2),o=i[0],u=i[1],l=Object(a.useState)(""),j=Object(r.a)(l,2),d=j[0],O=j[1];Object(a.useEffect)((function(){F.get("/users").then((function(e){return u(e.data)}))}),[]);return Object(h.jsxs)("div",{className:"dashboard",children:[Object(h.jsxs)("form",{className:"dashboard_form",children:[Object(h.jsx)("label",{htmlFor:"file",children:"Add File "}),Object(h.jsx)("input",{type:"file",id:"file",className:"dashboard_form_input",name:"file",onChange:function(e){return c({data:e.target.files[0],btn:e.target.name})}})]}),n&&Object(h.jsx)(K,{file:n,setFile:c}),Object(h.jsx)("h3",{className:"dashboard_files",children:" Files "}),d&&Object(h.jsx)("h3",{className:"msg",children:d}),Object(h.jsx)("section",{className:"dashboard_files_section",children:o&&o.files.map((function(e,t){return Object(h.jsxs)("div",{className:"file",children:[Object(h.jsx)("img",{src:e.link}),Object(h.jsxs)("h5",{className:"title",children:[" ",e.name]}),Object(h.jsxs)("div",{className:"actions",children:[Object(h.jsx)("label",{htmlFor:"update",className:"update",children:"Update "}),Object(h.jsx)("input",{type:"file",id:"update",name:e.name,onChange:function(e){return c({data:e.target.files[0],btn:e.target.name})}}),Object(h.jsx)("button",{className:"share",name:e.link,onClick:function(e){return function(e){var t=e.target.name;console.log(e.target.name);var n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),O("Copy to Clipboard Sucessfully! Share the link")}(e)},children:" Share "}),Object(h.jsx)("button",{className:"delete",name:e._id,onClick:function(e){return function(e){var t=e.target.name;F.delete("/files/".concat(t)).then((function(e){return O(e.data.msg)}))}(e)},children:" Delete "})]})]},e.name)}))})]})},H=n(60),U=["children"];function W(e){var t=e.children,n=Object(H.a)(e,U),a=c.a.Children.only(t);return Object(h.jsx)(g.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){return d.isAuthenticated()?c.a.cloneElement(a,Object(O.a)(Object(O.a)({},n),e)):Object(h.jsx)(g.a,{to:{pathname:"/"}})}}))}var L=["component"];function B(e){var t=e.component,n=Object(H.a)(e,L);return Object(h.jsx)(g.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){return d.isAuthenticated()?Object(h.jsx)(g.a,{to:{pathname:"/dashboard"}}):Object(h.jsx)(t,Object(O.a)(Object(O.a)({},e),n))}}))}var V=function(){var e=Object(a.useContext)(m);return Object(a.useEffect)((function(){e.checkAuthState()}),[e]),Object(h.jsx)("div",{className:"mainApp",children:Object(h.jsxs)(_.a,{children:[Object(h.jsx)(x,{}),Object(h.jsxs)(g.d,{children:[Object(h.jsx)(g.b,{exact:!0,path:"/",children:e.isAuth?Object(h.jsx)(g.a,{to:"/dashboard"}):Object(h.jsx)(g.a,{to:"/login"})}),Object(h.jsx)(g.b,{exact:!0,path:"/login",component:v}),Object(h.jsx)(B,{exact:!0,path:"/register",component:S}),Object(h.jsx)(W,{exact:!0,path:"/dashboard",children:Object(h.jsx)(w,{})})]})]})})};var q=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(p,{children:Object(h.jsx)(V,{})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(q,{})}),document.getElementById("root")),J()},51:function(e,t,n){}},[[314,1,2]]]);
//# sourceMappingURL=main.eadc91bf.chunk.js.map