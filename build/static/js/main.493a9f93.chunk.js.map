{"version":3,"sources":["services/auth-service.js","contexts/AuthContext.js","components/auth/login/login.js","components/auth/login/register.js","components/auth/login/actions.js","components/shared/Header.js","services/axios-service.js","firebase/config.js","hooks/useStorage.js","components/Progress.js","components/dashboard/Dashboard.js","components/shared/auth/ProtectedRoute.js","components/shared/auth/LoggedInRoute.js","components/root.js","App.js","reportWebVitals.js","index.js"],"names":["tokenKey","localStorage","getItem","this","token","jwt","JSON","parse","console","log","setItem","stringify","removeItem","exp","decode","moment","isBefore","getExpiration","getToken","isValid","AuthContext","createContext","Login","useContext","isAuth","error","signIn","useState","email","setEmail","password","setPassword","to","pathname","className","onSubmit","e","preventDefault","type","placeholder","onChange","target","value","required","Register","name","setName","passconf","setPassconf","setError","flag","setFlag","data","passwordConfirm","userData","axios","post","then","res","err","Promise","reject","response","errors","registered","Header","signOut","Fragment","onClick","axiosInstance","initInstance","create","baseURL","timeout","interceptors","request","use","config","authService","headers","Authorization","firebaseConfig","apiKey","process","API_KEY","authDomain","AUTH_DOMAIN","projectId","PROJECT_ID","storageBucket","STORAGE_BUCKET","messagingSenderId","MESSAGING_SENDER_ID","appId","APP_ID","firebaseApp","initializeApp","projectStorage","getStorage","axiosService","getInstance","useStorage","file","btn","progress","setProgress","url","setUrl","a","link","put","useEffect","storageRef","ref","uploadTask","uploadBytesResumable","on","snap","percentage","bytesTransferred","totalBytes","getDownloadURL","snapshot","downloadURL","postData","updateData","Progress","setFile","style","width","Dashboard","user","setUser","msg","setMsg","get","htmlFor","id","files","map","key","src","el","document","createElement","body","appendChild","select","execCommand","removeChild","copyClipboard","_id","delete","deleteFile","ProtectedRoute","props","children","rest","onlyChild","React","Children","only","render","isAuthenticated","cloneElement","LoggedInRoute","Component","component","Root","auth","checkAuthState","exact","path","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"mgBA0Ce,M,iDAtCbA,SAAW,a,4CAEX,WACE,OAAOC,aAAaC,QAAQC,KAAKH,Y,oBAKnC,SAAOI,GACL,OAAOC,SAAWC,KAAKC,MAAMH,M,uBAG/B,SAAUA,GACRI,QAAQC,IAAIL,GACZH,aAAaS,QAAQP,KAAKH,SAAUM,KAAKK,UAAUP,EAAMA,U,4BAG3D,WACEH,aAAaW,WAAWT,KAAKH,Y,2BAG/B,SAAcI,GACZ,IAAMS,EAAMV,KAAKW,OAAOV,GAAOS,IAE/B,OAAOE,OAAYF,K,qBAGrB,SAAQT,GACN,OAAOW,IAASC,SAASb,KAAKc,cAAcb,M,6BAG9C,WACE,IAAMA,EAAQD,KAAKe,WAEnB,SAAOd,IAASD,KAAKgB,QAAQf,Q,sCClCpBgB,EAAcC,0BCqDZC,EApDD,WACb,MAAkCC,qBAAWH,GAArCI,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,MAAOC,EAAvB,EAAuBA,OAEvB,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KAOA,OAAIP,EACI,cAAC,IAAD,CAAUQ,GAAI,CAAEC,SAAU,gBAIjC,yBAASC,UAAU,gBAAnB,SACC,uBAAMA,UAAU,qBAAqBC,SAXlB,SAACC,GACrBA,EAAEC,iBACFX,EAAO,CAAEE,QAAOE,cASf,UACC,oBAAII,UAAU,2BAAd,+BAGA,uBACCI,KAAK,OACLC,YAAY,QACZL,UAAU,2BACVM,SAAU,SAACJ,GAAD,OAAOP,EAASO,EAAEK,OAAOC,QACnCC,UAAQ,IAGT,uBACCL,KAAK,WACLC,YAAY,WACZL,UAAU,2BACVM,SAAU,SAACJ,GAAD,OAAOL,EAAYK,EAAEK,OAAOC,QACtCC,UAAQ,IAGT,uBACCT,UAAU,4BACVQ,MAAM,QACNJ,KAAK,WAELb,EACA,qBAAKS,UAAU,2BAAf,SAA2CT,IAE3C,8BCwCUmB,EAtFE,WAChB,MAAwBjB,mBAAS,IAAjC,mBAAOkB,EAAP,KAAaC,EAAb,KAEA,EAA0BnB,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAAgCJ,mBAAS,IAAzC,mBAAOoB,EAAP,KAAiBC,EAAjB,KAGA,EAA0BrB,mBAAS,IAAnC,mBAAOF,EAAP,KAAcwB,EAAd,KAEA,EAAwBtB,oBAAS,GAAjC,mBAAOuB,EAAP,KAAaC,EAAb,KAEMC,EAAO,CACZP,OAEAjB,QACAE,WACAuB,gBAAiBN,GAYlB,OAAIG,EACI,cAAC,IAAD,CAAUlB,GAAI,CAAEC,SAAU,YAIjC,0BAASC,UAAU,mBAAnB,UACC,uBAAMA,UAAU,wBAAwBC,SAdrB,SAACC,GCtBC,IAACkB,EDuBvBlB,EAAEC,kBCvBqBiB,ED0BZF,ECpBJG,IACJC,KAAK,uBADD,eAEAF,IAEJG,MAAK,SAACC,GAAD,OAASA,EAAIN,QAAM,SAACO,GAAD,OAASC,QAAQC,OAAOF,EAAIG,SAASV,KAAKW,YDiBnEN,MAAK,SAACO,GAAD,OAAgBb,GAAQ,MAAO,SAACQ,GAAD,OAASV,EAASU,OASvD,UACC,oBAAIzB,UAAU,2BAAd,gCACA,uBACCI,KAAK,OACLC,YAAY,OACZL,UAAU,8BACVM,SAAU,SAACJ,GAAD,OAAOU,EAAQV,EAAEK,OAAOC,QAClCC,UAAQ,IAMT,uBACCL,KAAK,QACLC,YAAY,QACZL,UAAU,8BACVM,SAAU,SAACJ,GAAD,OAAOP,EAASO,EAAEK,OAAOC,QACnCC,UAAQ,IAGT,uBACCL,KAAK,WACLC,YAAY,WACZL,UAAU,8BACVM,SAAU,SAACJ,GAAD,OAAOL,EAAYK,EAAEK,OAAOC,QACtCC,UAAQ,IAGT,uBACCL,KAAK,WACLC,YAAY,mBACZL,UAAU,8BACVM,SAAU,SAACJ,GAAD,OAAOY,EAAYZ,EAAEK,OAAOC,QACtCC,UAAQ,IAKT,uBACCT,UAAU,gCACVQ,MAAM,UACNJ,KAAK,cAINb,EAAQ,YAAc,OE9CXwC,EAlCA,WACd,MAA4B1C,qBAAWH,GAA/BI,EAAR,EAAQA,OAAQ0C,EAAhB,EAAgBA,QAqBhB,OACC,sBAAKhC,UAAU,SAAf,UAEC,cAAC,IAAD,CAAMF,GAAG,IAAIE,UAAU,OAAvB,oBAIA,qBAAKA,UAAU,WAAf,SAzBGV,EAEF,cAAC,IAAM2C,SAAP,UACC,cAAC,IAAD,CAAMjC,UAAU,UAAUF,GAAG,IAAIoC,QAASF,EAA1C,sBAOD,cAAC,IAAMC,SAAP,UACC,cAAC,IAAD,CAAMjC,UAAU,UAAUF,GAAG,YAA7B,4BCcU,M,WA5Bb,aAAe,yBAFfqC,cAAgB,GAGdlE,KAAKmE,e,gDAGP,WAgBE,OAfAnE,KAAKkE,cAAgBd,IAAMgB,OAAO,CAChCC,QAAS,UACTC,QAAS,MAGXtE,KAAKkE,cAAcK,aAAaC,QAAQC,KAAI,SAACC,GAC3C,IAAMzE,EAAQ0E,EAAY5D,WAM1B,OAJId,IACFyE,EAAOE,QAAQC,cAAf,iBAAyC5E,IAGpCyE,KAGF1E,KAAKkE,gB,yBAGd,WACE,OAAOlE,KAAKkE,eAAiBlE,KAAKmE,mB,uDC3BhCW,EAAiB,CACrBC,OAAQC,mIAAYC,QACpBC,WAAYF,mIAAYG,YACxBC,UAAWJ,mIAAYK,WACvBC,cAAeN,mIAAYO,eAC3BC,kBAAmBR,mIAAYS,oBAC/BC,MAAOV,mIAAYW,QAIfC,EAAcC,YAAcf,GAE5BgB,EAAiBC,YAAWH,GCV5B1B,EAAgB8B,EAAaC,cAyDpBC,EAtDG,SAACC,EAAOC,GACtB,MAAiC5E,mBAAS,GAA1C,mBAAO6E,EAAP,KAAkBC,EAAlB,KACA,EAA2B9E,mBAAS,IAApC,mBAAOF,EAAP,KAAewB,EAAf,KACA,EAAuBtB,mBAAS,IAAhC,mBAAO+E,EAAP,KAAaC,EAAb,KAH6B,4CAM7B,WAA0BD,EAAM7D,GAAhC,iBAAA+D,EAAA,6DACUxD,EAAO,CACTP,OACAgE,KAAKH,GAETlG,QAAQC,IAAI2C,GALhB,SAM2BiB,EAAcyC,IAAI,uBAAuB1D,GANpE,cAMUU,EANV,gBAQUA,EAASV,KARnB,OAUI5C,QAAQC,IAAI,aAAeqD,EAASV,MAVxC,2CAN6B,oEAkB7B,WAAwBsD,EAAM7D,GAA9B,iBAAA+D,EAAA,6DACUxD,EAAO,CACTP,OACAgE,KAAKH,GAETlG,QAAQC,IAAI2C,GALhB,SAM2BiB,EAAcb,KAAK,uBAAuBJ,GANrE,cAMUU,EANV,gBAQUA,EAASV,KARnB,OAUI5C,QAAQC,IAAI,aAAeqD,EAASV,MAVxC,2CAlB6B,wBAmD7B,OA9CA5C,QAAQC,IAAI,SAAU6F,GA0BtBS,qBAAU,WACN,IAAMC,EAAaC,YAAIhB,EAAgBK,EAAKlD,KAAKP,MAC3CA,EAAOyD,EAAKlD,KAAKP,KACjBqE,EAAaC,YAAqBH,EAAaV,EAAKlD,MAC1D8D,EAAWE,GAAG,iBAAiB,SAACC,GAC5B,IAAIC,EAAcD,EAAKE,iBAAmBF,EAAKG,WAAc,IAC7Df,EAAYa,MACd,SAAC3D,GACCV,EAASU,MACX,WACE8D,YAAeP,EAAWQ,SAAST,KAAKxD,MAAK,SAACkE,GAC9ChB,EAAOD,GACS,SAAbJ,EAAKC,IA3Ca,sCA4CjBqB,CAASD,EAAc9E,GA5CN,sCA8CjBgF,CAAWF,EAAcrB,EAAKC,aAGvC,CAACD,IAEG,CAACE,WAAW/E,QAAQiF,QCxChBoB,EAfE,SAAC,GAAsB,IAArBxB,EAAoB,EAApBA,KAAMyB,EAAc,EAAdA,QACrB,EAAwB1B,EAAWC,GAA5BI,EAAP,EAAOA,IAAKF,EAAZ,EAAYA,SASZ,OAPAO,qBAAU,WACHL,GACCqB,EAAQ,QAEd,CAACrB,EAAKqB,IAERvH,QAAQC,IAAIiG,EAAMF,GAEd,sBAAKtE,UAAU,WAAW8F,MAAO,CAACC,MAAMzB,EAAU,KAAlD,cAA0DA,EAA1D,UCTFnC,EAAgB8B,EAAaC,cA+DpB8B,EA7DG,WACjB,MAA2BvG,mBAAS,MAApC,mBAAQ2E,EAAR,KAAeyB,EAAf,KACA,EAA2BpG,mBAAS,MAApC,mBAAQwG,EAAR,KAAeC,EAAf,KACA,EAAyBzG,mBAAS,IAAlC,mBAAQ0G,EAAR,KAAcC,EAAd,KAGAvB,qBAAU,WACT1C,EAAckE,IAAI,UAAU9E,MAAK,SAAAC,GAAG,OAAI0E,EAAQ1E,EAAIN,WACnD,IAqBF,OACC,sBAAKlB,UAAU,YAAf,UACC,uBAAMA,UAAU,iBAAhB,UACC,uBAAOsG,QAAQ,OAAf,uBACA,uBAAOlG,KAAK,OAAOmG,GAAG,OAAOvG,UAAU,uBAAuBW,KAAK,OAAOL,SAAU,SAACJ,GAAD,OAAO2F,EAAQ,CAAC3E,KAAKhB,EAAEK,OAAOiG,MAAM,GAAGnC,IAAInE,EAAEK,OAAOI,aAIxIyD,GAAQ,cAAC,EAAD,CAAUA,KAAMA,EAAMyB,QAASA,IACxC,oBAAI7F,UAAU,kBAAd,qBACCmG,GAAO,oBAAInG,UAAU,MAAd,SAAqBmG,IAE7B,yBAASnG,UAAU,0BAAnB,SACEiG,GAAQA,EAAKO,MAAMC,KAAI,SAACrC,EAAQsC,GAChC,OAAO,sBAAqB1G,UAAU,OAA/B,UACN,qBAAK2G,IAAKvC,EAAKO,OACf,qBAAI3E,UAAU,QAAd,cAAwBoE,EAAKzD,QAC7B,sBAAKX,UAAU,UAAf,UACA,uBAAOsG,QAAQ,SAAStG,UAAU,SAAlC,qBACA,uBAAOI,KAAK,OAAOmG,GAAG,SAAS5F,KAAMyD,EAAKzD,KAAML,SAAU,SAACJ,GAAD,OAAO2F,EAAQ,CAAC3E,KAAKhB,EAAEK,OAAOiG,MAAM,GAAGnC,IAAInE,EAAEK,OAAOI,UAG7G,wBAAQX,UAAU,QAAQW,KAAMyD,EAAKO,KAAMzC,QAAS,SAAAhC,GAAC,OApCrC,SAACA,GACtB,IAAMsE,EAAMtE,EAAEK,OAAOI,KACrBrC,QAAQC,IAAI2B,EAAEK,OAAOI,MACrB,IAAMiG,EAAKC,SAASC,cAAc,YAClCF,EAAGpG,MAAQgE,EACXqC,SAASE,KAAKC,YAAYJ,GAC1BA,EAAGK,SACHJ,SAASK,YAAY,QACrBL,SAASE,KAAKI,YAAYP,GAE1BR,EAAO,iDA0BqDgB,CAAclH,IAArE,qBACA,wBAAQF,UAAU,SAASW,KAAMyD,EAAKiD,IAAKnF,QAAS,SAAAhC,GAAC,OA1CxC,SAACA,GACnB,IAAMqG,EAAKrG,EAAEK,OAAOI,KACpBwB,EAAcmF,OAAd,iBAA+Bf,IAAMhF,MAAK,SAAAC,GAAG,OAAI4E,EAAO5E,EAAIN,KAAKiF,QAwCHoB,CAAWrH,IAApE,2BATekE,EAAKzD,e,uBC/CpB,SAAS6G,EAAeC,GAC9B,IAAQC,EAAsBD,EAAtBC,SAAaC,EAArB,YAA8BF,EAA9B,GAEMG,EAAYC,IAAMC,SAASC,KAAKL,GACtC,OACC,cAAC,IAAD,2BACKC,GADL,IAECK,OAAQ,SAACP,GAAD,OACP7E,EAAYqF,kBACXJ,IAAMK,aAAaN,EAAnB,2BAAmCD,GAASF,IAE5C,cAAC,IAAD,CAAU3H,GAAI,CAAEC,SAAU,W,oBCXxB,SAASoI,EAAcV,GAC7B,IAAmBW,EAAuBX,EAAlCY,UAAyBV,EAAjC,YAA0CF,EAA1C,GAEA,OACC,cAAC,IAAD,2BACKE,GADL,IAECK,OAAQ,SAACP,GAAD,OACP7E,EAAYqF,kBACX,cAAC,IAAD,CAAUnI,GAAI,CAAEC,SAAU,gBAE1B,cAACqI,EAAD,2BAAeX,GAAWE,QC6ChBW,MA3Cf,WACC,IAAMC,EAAOlJ,qBAAWH,GAMxB,OAJA2F,qBAAU,WACT0D,EAAKC,mBACH,CAACD,IAGH,qBAAKvI,UAAU,UAAf,SAEC,eAAC,IAAD,WACC,cAAC,EAAD,IAEA,eAAC,IAAD,WACC,cAAC,IAAD,CAAOyI,OAAK,EAACC,KAAK,IAAlB,SACEH,EAAKjJ,OACL,cAAC,IAAD,CAAUQ,GAAG,eAEb,cAAC,IAAD,CAAUA,GAAG,aAMf,cAAC,IAAD,CAAO2I,OAAK,EAACC,KAAK,SAASL,UAAWjJ,IACtC,cAAC+I,EAAD,CACCM,OAAK,EACLC,KAAK,YACLL,UAAW3H,IAGZ,cAAC8G,EAAD,CAAgBiB,OAAK,EAACC,KAAK,aAA3B,SACC,cAAC,EAAD,eC/BSC,MAZf,WAKE,OACE,qBAAK3I,UAAU,MAAf,SACE,cAAC,EAAD,OCAS4I,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBvH,MAAK,YAAkD,IAA/CwH,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASpB,OACP,cAAC,IAAMqB,WAAP,UACE,cAAC,EAAD,MAEFxC,SAASyC,eAAe,SAM1BV,K","file":"static/js/main.493a9f93.chunk.js","sourcesContent":["import * as jwt from \"jsonwebtoken\";\r\nimport * as moment from \"moment\";\r\n\r\nclass AuthService {\r\n  tokenKey = \"auth_token\";\r\n\r\n  getToken() {\r\n    return localStorage.getItem(this.tokenKey);\r\n  }\r\n\r\n\r\n\r\n  decode(token) {\r\n    return jwt.decode(JSON.parse(token));\r\n  }\r\n\r\n  saveToken(token) {\r\n    console.log(token);\r\n    localStorage.setItem(this.tokenKey, JSON.stringify(token.token));\r\n  }\r\n\r\n  invalidateUser() {\r\n    localStorage.removeItem(this.tokenKey);\r\n  }\r\n\r\n  getExpiration(token) {\r\n    const exp = this.decode(token).exp;\r\n\r\n    return moment.unix(exp);\r\n  }\r\n\r\n  isValid(token) {\r\n    return moment().isBefore(this.getExpiration(token));\r\n  }\r\n\r\n  isAuthenticated() {\r\n    const token = this.getToken();\r\n\r\n    return token && this.isValid(token) ? true : false;\r\n  }\r\n}\r\n\r\nexport default new AuthService();\r\n","import React, { createContext, useState } from \"react\";\r\nimport authService from \"../services/auth-service\";\r\nimport * as actions from \"../components/auth/login/actions\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nconst AuthContextProvider = (props) => {\r\n\tconst [isAuth, setState] = useState(false);\r\n\tconst [error, setError] = useState(\"\");\r\n\r\n\tconst checkAuthState = (e) => {\r\n\t\tif (authService.isAuthenticated()) {\r\n\t\t\tsetState(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst isAuthenticated = () => {\r\n\t\treturn authService.isAuthenticated();\r\n\t};\r\n\r\n\tconst signOut = () => {\r\n\t\tauthService.invalidateUser();\r\n\t\tsetState(false);\r\n\t\tsetError(\"\");\r\n\t};\r\n\r\n\tconst signIn = (loginData) => {\r\n\t\treturn actions\r\n\t\t\t.login(loginData)\r\n\t\t\t.then((token) => {\r\n\t\t\t\tauthService.saveToken(token);\r\n\t\t\t\tsetState(true);\r\n\r\n\t\t\t\treturn token;\r\n\t\t\t})\r\n\t\t\t.catch((err) => setError(\"Email or Password is Incorrect !\"));\r\n\t};\r\n\r\n\tconst authAPI = {\r\n\t\tcheckAuthState,\r\n\t\tsignOut,\r\n\t\tsignIn,\r\n\t\tisAuth,\r\n\t\terror,\r\n\t\tisAuthenticated,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={authAPI}>\r\n\t\t\t{props.children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default AuthContextProvider;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { AuthContext } from \"../../../contexts/AuthContext\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport '../../../App.css';\r\n\r\nconst Login = () => {\r\n\tconst { isAuth, error, signIn } = useContext(AuthContext);\r\n\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tsignIn({ email, password });\r\n\t};\r\n\r\n\tif (isAuth) {\r\n\t\treturn <Redirect to={{ pathname: \"/dashboard\" }} />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"login_section\">\r\n\t\t\t<form className=\"login_section_form\" onSubmit={handleSubmit}>\r\n\t\t\t\t<h2 className=\"login_section_form_title\">\r\n\t\t\t\t\tWelcome To Intern\r\n\t\t\t\t</h2>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\tclassName=\"login_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\tclassName=\"login_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"login_section_form_submit\"\r\n\t\t\t\t\tvalue=\"Login\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t/>\r\n\t\t\t\t{error ? (\r\n\t\t\t\t\t<div className=\"login_section_form_error\">{error}</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div />\r\n\t\t\t\t)}\r\n\t\t\t</form>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport * as actions from \"./actions\";\r\n\r\nconst Register = () => {\r\n\tconst [name, setName] = useState(\"\");\r\n\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [passconf, setPassconf] = useState(\"\");\r\n\r\n\r\n\tconst [error, setError] = useState(\"\");\r\n\r\n\tconst [flag, setFlag] = useState(false);\r\n\r\n\tconst data = {\r\n\t\tname,\r\n\t\t\r\n\t\temail,\r\n\t\tpassword,\r\n\t\tpasswordConfirm: passconf,\r\n\t\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tactions\r\n\t\t\t.register(data)\r\n\t\t\t.then((registered) => setFlag(true), (err) => setError(err));\r\n\t};\r\n\r\n\tif (flag) {\r\n\t\treturn <Redirect to={{ pathname: \"/login\" }} />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"register_section\">\r\n\t\t\t<form className=\"register_section_form\" onSubmit={handleSubmit}>\r\n\t\t\t\t<h2 className=\"login_section_form_title\">Start Your Journey</h2>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\tclassName=\"register_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setName(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\tclassName=\"register_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\tclassName=\"register_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Confirm Password\"\r\n\t\t\t\t\tclassName=\"register_section_form_input\"\r\n\t\t\t\t\tonChange={(e) => setPassconf(e.target.value)}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"register_section_form_submit \"\r\n\t\t\t\t\tvalue=\"Sign Up\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t/>\r\n\t\t\t</form>\r\n\r\n\t\t\t{error ? \"error yes\" : \"\"}\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default Register;\r\n","import axios from \"axios\";\r\nimport authService from \"../../../services/auth-service\";\r\n\r\nexport const register = (userData) => {\r\n  // return axios\r\n  //   .post(\"/api/v1/shops/signup\", {\r\n  //     ...userData,\r\n  //   })\r\n  //   .then((res) => res.data, (err) => Promise.reject(err.response.data.errors));\r\n  return axios\r\n    .post(\"/api/v1/users/signup\", {\r\n      ...userData,\r\n    })\r\n    .then((res) => res.data, (err) => Promise.reject(err.response.data.errors));\r\n};\r\n\r\nexport const checkAuthState = (e) => {\r\n  if (authService.isAuthenticated()) {\r\n    return true;\r\n  }\r\n};\r\n\r\nexport const getSellerName = () => {\r\n  return axios\r\n  .get(\"/api/v1/users/\")\r\n  .then((res) => res.data)\r\n  .catch((error) => console.log(error));\r\n};\r\n\r\nexport const login = (userData) => {\r\n  // return axios\r\n  //   .post(\"https://apicoopinn.herokuapp.com/api/v1/shops/login\", {\r\n  //     ...userData,\r\n  //   })\r\n  //   .then((res) => res.data)\r\n  //   .catch((error) => console.log(error));\r\n  return axios\r\n    .post(\"/api/v1/users/login\", { ...userData })\r\n    .then((res) => res.data)\r\n    .catch((error) => console.log(error));\r\n};\r\n\r\nexport const logout = () => {\r\n  authService.invalidateUser();\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../contexts/AuthContext\";\r\nimport '../../App.css';\r\n\r\nconst Header = () => {\r\n\tconst { isAuth, signOut } = useContext(AuthContext);\r\n\r\n\tconst renderLink = () => {\r\n\t\tif (isAuth) {\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Link className=\"navlink\" to=\"/\" onClick={signOut}>\r\n\t\t\t\t\t\tlogout\r\n\t\t\t\t\t</Link>\t\t\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Link className=\"navlink\" to=\"/register\">\r\n\t\t\t\t\t\tSignup\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"header\">\r\n\t\t\t{/*<img src={logoCo} />*/}\r\n\t\t\t<Link to=\"/\" className=\"logo\">\r\n\t\t\t\tIntern\r\n\t\t\t</Link>\r\n\r\n\t\t\t<nav className=\"navlinks\">{renderLink()}</nav>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","import axios from \"axios\";\r\nimport authService from \"./auth-service\";\r\n\r\nclass AxiosService {\r\n  axiosInstance = {};\r\n\r\n  constructor() {\r\n    this.initInstance();\r\n  }\r\n\r\n  initInstance() {\r\n    this.axiosInstance = axios.create({\r\n      baseURL: \"/api/v1\",\r\n      timeout: 2000,\r\n    });\r\n\r\n    this.axiosInstance.interceptors.request.use((config) => {\r\n      const token = authService.getToken();\r\n\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n\r\n      return config;\r\n    });\r\n\r\n    return this.axiosInstance;\r\n  }\r\n\r\n  getInstance() {\r\n    return this.axiosInstance || this.initInstance();\r\n  }\r\n}\r\n\r\nexport default new AxiosService();\r\n","import {initializeApp} from \"firebase/app\";\r\nimport {getStorage ,ref , uploadBytesResumable, getDownloadURL} from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.API_KEY,\r\n  authDomain: process.env.AUTH_DOMAIN,\r\n  projectId: process.env.PROJECT_ID,\r\n  storageBucket: process.env.STORAGE_BUCKET,\r\n  messagingSenderId: process.env.MESSAGING_SENDER_ID,\r\n  appId: process.env.APP_ID\r\n};\r\n\r\n\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\n\r\nconst projectStorage = getStorage(firebaseApp);\r\n\r\nexport {projectStorage , ref ,uploadBytesResumable, getDownloadURL};","import { updateMetadata } from '@firebase/storage';\r\nimport React, { useState, useEffect } from 'react'\r\nimport {projectStorage , ref , uploadBytesResumable, getDownloadURL} from '../firebase/config';\r\nimport axiosService from \"../services/axios-service\";\r\n\r\nconst axiosInstance = axiosService.getInstance();\r\n\r\n\r\nconst useStorage =(file , btn)=> {\r\n    const [progress , setProgress] = useState(0);\r\n    const [error , setError] = useState(\"\");\r\n    const [url , setUrl] = useState(\"\");\r\n\r\n    console.log(\"in ss:\", file);\r\n    async function updateData(url , name) {\r\n        const data = {\r\n            name,\r\n            link:url\r\n        }\r\n        console.log(data);\r\n        const response = await axiosInstance.put('/api/v1/files/update',data) ;\r\n    \r\n        await response.data;\r\n        \r\n        console.log(\"response: \" , response.data);\r\n      }\r\n    async function postData(url , name) {\r\n        const data = {\r\n            name,\r\n            link:url\r\n        }\r\n        console.log(data);\r\n        const response = await axiosInstance.post('/api/v1/files/upload',data) ;\r\n    \r\n        await response.data;\r\n        \r\n        console.log(\"response: \" , response.data);\r\n      }\r\n\r\n    useEffect(()=>{\r\n        const storageRef = ref(projectStorage ,file.data.name);\r\n        const name = file.data.name ;\r\n        const uploadTask = uploadBytesResumable(storageRef , file.data);\r\n        uploadTask.on('state_changed', (snap) => {\r\n            let percentage = (snap.bytesTransferred / snap.totalBytes) * 100 ;\r\n            setProgress(percentage);\r\n        },(err)=>{\r\n            setError(err);\r\n        },()=>{\r\n            getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\r\n            setUrl(url);\r\n            if(file.btn === \"file\"){\r\n                postData(downloadURL , name);\r\n            }else{\r\n                updateData(downloadURL , file.btn);\r\n            }\r\n        })}\r\n    )},[file])\r\n\r\n    return {progress , error , url}\r\n}\r\n\r\nexport default useStorage;","import React, { useState, useEffect } from 'react'\r\nimport useStorage from '../hooks/useStorage';\r\nimport '../App.css'; \r\n\r\nconst Progress = ({file, setFile }) => {\r\n    const {url ,progress} = useStorage(file );\r\n\r\n    useEffect(()=>{\r\n        if(url){\r\n            setFile(null);\r\n        }\r\n    },[url, setFile]);\r\n\r\n    console.log(url , progress);\r\n    return (\r\n        <div className=\"progress\" style={{width:progress+ '%'}}> {progress} % </div>\r\n    )\r\n}\r\n\r\nexport default Progress;","import React, { useState, useEffect } from \"react\";\r\nimport axiosService from \"../../services/axios-service\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport * as actions from \"../auth/login/actions\";\r\nimport Progress from '../Progress'\r\n\r\nconst axiosInstance = axiosService.getInstance();\r\n\r\nconst Dashboard = () => {\r\n\tconst [ file , setFile ] = useState(null);\r\n\tconst [ user , setUser ] = useState(null);\r\n\tconst [ msg , setMsg ] = useState(\"\");\r\n\r\n\r\n\tuseEffect(()=>{\r\n\t\taxiosInstance.get(\"/users\").then(res => setUser(res.data));\r\n\t},[]);\r\n\r\n\tconst deleteFile = (e) => {\r\n\t\tconst id = e.target.name;\r\n\t\taxiosInstance.delete(`/files/${id}`).then(res => setMsg(res.data.msg));\r\n\t};\r\n\r\n\tconst copyClipboard = (e) => {\r\n\t\tconst url = e.target.name;\r\n\t\tconsole.log(e.target.name);\r\n\t\tconst el = document.createElement('textarea');\r\n\t\tel.value = url;\r\n\t\tdocument.body.appendChild(el);\r\n\t\tel.select();\r\n\t\tdocument.execCommand('copy');\r\n\t\tdocument.body.removeChild(el);\r\n\r\n\t\tsetMsg(\"Copy to Clipboard Sucessfully! Share the link\");\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"dashboard\">\r\n\t\t\t<form className=\"dashboard_form\">\r\n\t\t\t\t<label htmlFor=\"file\">Add File </label>\r\n\t\t\t\t<input type=\"file\" id=\"file\" className=\"dashboard_form_input\" name=\"file\" onChange={(e) => setFile({data:e.target.files[0],btn:e.target.name})} />\r\n\r\n\t\t\t\t\r\n\t\t\t</form>\r\n\t\t\t{file && <Progress file={file} setFile={setFile} />}\r\n\t\t\t<h3 className=\"dashboard_files\"> Files </h3>\r\n\t\t\t{msg && <h3 className=\"msg\">{msg}</h3>}\r\n\r\n\t\t\t<section className=\"dashboard_files_section\">\r\n\t\t\t\t{user && user.files.map((file  , key)=> {\r\n\t\t\t\t\treturn <div key={file.name} className=\"file\"> \r\n\t\t\t\t\t\t<img src={file.link}/>\r\n\t\t\t\t\t\t<h5 className=\"title\"> {file.name}</h5>\r\n\t\t\t\t\t\t<div className=\"actions\">\r\n\t\t\t\t\t\t<label htmlFor=\"update\" className=\"update\">Update </label>\r\n\t\t\t\t\t\t<input type=\"file\" id=\"update\" name={file.name} onChange={(e) => setFile({data:e.target.files[0],btn:e.target.name})} />\r\n\r\n\r\n\t\t\t\t\t\t\t<button className=\"share\" name={file.link} onClick={e=>copyClipboard(e)}> Share </button>\r\n\t\t\t\t\t\t\t<button className=\"delete\" name={file._id} onClick={e => deleteFile(e)}> Delete </button>\r\n\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t})}\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Dashboard;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authService from \"../../../services/auth-service\";\r\n\r\nexport function ProtectedRoute(props) {\r\n\tconst { children, ...rest } = props;\r\n\r\n\tconst onlyChild = React.Children.only(children);\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={(props) =>\r\n\t\t\t\tauthService.isAuthenticated() ? (\r\n\t\t\t\t\tReact.cloneElement(onlyChild, { ...rest, ...props })\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to={{ pathname: \"/\" }} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authService from \"../../../services/auth-service\";\r\n\r\nexport function LoggedInRoute(props) {\r\n\tconst { component: Component, ...rest } = props;\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={(props) =>\r\n\t\t\t\tauthService.isAuthenticated() ? (\r\n\t\t\t\t\t<Redirect to={{ pathname: \"/dashboard\" }} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Component {...props} {...rest} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n}\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { Route, Redirect, BrowserRouter, Switch } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\nimport Login from \"./auth/login/login\";\r\nimport Register from \"./auth/login/register\";\r\n\r\nimport Header from \"./shared/Header\";\r\n\r\n\r\nimport Dashboard from \"./dashboard/Dashboard\";\r\n\r\n\r\nimport { ProtectedRoute } from \"./shared/auth/ProtectedRoute\";\r\nimport { LoggedInRoute } from \"./shared/auth/LoggedInRoute\";\r\n\r\nfunction Root() {\r\n\tconst auth = useContext(AuthContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tauth.checkAuthState();\r\n\t}, [auth]);\r\n\r\n\treturn (\r\n\t\t<div className=\"mainApp\">\r\n\t\t\t\r\n\t\t\t<BrowserRouter>\r\n\t\t\t\t<Header />\r\n\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t{auth.isAuth ? (\r\n\t\t\t\t\t\t\t<Redirect to=\"/dashboard\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Redirect to=\"/login\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\t\t<Route exact path=\"/login\" component={Login} />\r\n\t\t\t\t\t<LoggedInRoute\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath=\"/register\"\r\n\t\t\t\t\t\tcomponent={Register}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<ProtectedRoute exact path=\"/dashboard\">\r\n\t\t\t\t\t\t<Dashboard />\r\n\t\t\t\t\t</ProtectedRoute>\r\n\t\t\t\t\t\r\n\t\t\t\t</Switch>\r\n\r\n\t\t\t\t\r\n\t\t\t</BrowserRouter>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Root;\r\n","import './App.css';\nimport React, { useState } from 'react'\nimport Root from './components/root';\nimport Progress from './components/Progress';\n\nfunction App() {\n  \n\n  \n\n  return (\n    <div className=\"App\">\n      <Root />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}